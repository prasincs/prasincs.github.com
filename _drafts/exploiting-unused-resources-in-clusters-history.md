---
layout: post
title: "Exploiting Unused Resources in Clusters : A Short History"
description: "How we got to Mesos and Omega"
category:  
tags: [clojure, mesos, distributed systems]
---
{% include JB/setup %}



There are buzzwords and there are useful technologies, Mesos is currently in the intersection of these two fortuitous sets. I tend to think that Mesos is a massively useful technology after your needs grow beyond a certain size. What do I mean? Suppose you have 16 beefy machines that you have allocated for running your Hadoop Cluster and they get used maybe for an hour a day at full throttle to catchup on previous day's log processing. What is the cluster doing for the rest of the day? Maybe certain nodes are downloading from data stores to prepare work, maybe you have Impala and Hive and you're allowing people to query the existing datasets on HDFS. 

Now the question is: what if you could use the whole cluster at nearly maximum capacity all the time and not just for the Big problems? Allow various services to run on their own on the same hardware as the rest of the systems. 

## The History

Of course, this isn't new concept. I think knowing -- or at least being aware of the history of these techologies can provide a great deal of appreciation in understanding the newfangled. High Performance Computing has been using technologies like PBS and Condor for a long time. There's a great interview of Miron Livny, the leader of HTCondor project (True Story: during one of my Internships, I fought hard and won to change from PBS to Condor). [Interview of Miron Livny](http://research.cs.wisc.edu/htcondor/HPCwire.1)

Here's an excerpt from the 1997 interview that talks about the timescales and interest in High Throughput Computing. 

> The Condor project is referred to as High Throughput Computing
> (HTC) rather than the traditional High Performance Computing (HPC). HPC deals
> with floating-point operations per second, and I like to portray HTC as
> floating-point operations per year. We believe there are many scientists and
> engineers who are interested in the question: 'What can I accomplish
> (computationally) in two to six months?' HTC serves a vital role for this
> group of researchers.

Oh man, the history of these high performance resource sharing systems goes even further -- any machine that needed to do heavy scientific computation had to be high performance and since you were using up the machines that someone else was waiting on, you had to get the most bang for the buck. It's no surprise that a lot of research labs have programmers help research scientists optimize their programs before running on their HPC clusters. I'm not terribly interested in these systems. They're effectively batch processing systems. One vital distinction between PBS (Portable Batch System) and Condor was that while PBS basically owned all the resources for a given time, condor allowed you to be lot more granular. There are some less known systems that I have used [Xgrid](https://en.wikipedia.org/wiki/Xgrid) from Apple was rather interesting that it allowed you to turn a bunch of commodity machines into a cluster rather easily and it was shipped with every single Mac. Too bad it was discontinued in 10.8. Popular mathematics software Mathematica also ships with gridMathematica since version 7. It used to be an extension you had to install separately otherwise. 


## Lets get real 

However, most tasks companies run aren't running for 6 months straight. You might have a high uptime for your web or MySQL server but you're most likely not running a long simulation for that whole time. If you are, good for you and hope you get published ;). Most companies just want to use the resources they have in efficient manner and not over provision by orders of magnitude all the time. 


## Mesos and Me 

I have been on and off in the HPC and Cluster/Systems circuit -- including most recently reviewing a book on building a cluster out of Raspberry Pis, which was awesome. I operate small but powerful Mesos cluster at SparX and these are the tales of taming the said Mesos Cluster. The idea is to use the same cluster for batch-like processing, as well as interactive jobs and even services. There are ways that Mesos allows you to tune your cluster for these kinds of workloads. 
